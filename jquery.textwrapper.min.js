/**
* jQuery Text Wrapper
* @author: jsimonait <jsimonait@gmail.com>
*/
(function(b){b.fn.textwrap=function(d,e,k){return b.textWrapper.wrap(b(this),d,e,k)};b.fn.textunwrap=function(d,e){b.textWrapper.unwrap(b(this),d,e)};b.textWrapper=new function(){var d=this;this.options={attributeName:"tw-text",createPattern:function(a){return RegExp("(^|[ \n\r\t.,'\"+!?-]+)("+a+")([ \n\r\t.,'\"+!?-]+|$)","g")}};this.wrap=function(a,m,c,f){var g=[];f=b.extend(d.options,f||{});a=b(a);a.each(function(a,l){if("undefined"!=typeof m.push)for(a in m)b.merge(g,e(l,m[a],c,f));else b.merge(g, e(l,m,c,f))});return g};this.unwrap=function(a,m,c){c=b.extend(d.options,c||{});a=b(a);b("["+c.attributeName+'="'+m+'"]',a).contents().unwrap()};this.find=function(a,b,c){a=k(a);for(var f=a.childNodes.length;0<f--;){var g=a.childNodes[f];if(1==g.nodeType)d.find(g,b,c);else if(3==g.nodeType){for(var e=[],l;l=b.exec(g.data);)e.push(l);for(l=e.length;0<l--;)c.call(window,g,e[l])}}};var e=function(a,e,c,f){var g=[];f=b.extend(d.options,f||{});a=k(a);var n=f.createPattern(e);d.find(a,n,function(a,b){var h= c,d;if("string"==typeof h)d=document.createElement(h);else{h instanceof jQuery&&(h=h.get(0));d=document.createElement(h.tagName);for(var h=h.attributes,k=0;k<h.length;k++)d.setAttribute(h[k].nodeName,h[k].nodeValue)}c=d;c.setAttribute(f.attributeName,e);a.splitText(b.index+b[0].length);c.appendChild(a.splitText(b.index));a.parentNode.insertBefore(c,a.nextSibling);g.push(c)});return g},k=function(a){a instanceof jQuery&&(a=1==a.length?a.get(0):a.get());return a}}})(jQuery);